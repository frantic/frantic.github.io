<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Moving My Serverless Project to Ruby on Rails / frantic.im</title>
    <meta name="author" content="Alex Kotliarskyi">
    <meta name="description" content="Serverless is like a black hole. It promised exciting adventures, but the gravity sucked me in and I spend most of my efforts dealing with its complexity, in...">

    <link rel="canonical" href="https://frantic.im/back-to-rails">
    <link rel="alternate" type="application/rss+xml" title="frantic.im" href="https://frantic.im/feed.xml">

    <meta property="og:title" content="Moving My Serverless Project to Ruby on Rails">
    <meta property="og:image" content="https://frantic.im/assets/back-to-rails/og-image.jpg">
    <meta name="og:description" content="Serverless is like a black hole. It promised exciting adventures, but the gravity sucked me in and I spend most of my efforts dealing with its complexity, in...">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@alex_frantic">
    <meta name="twitter:creator" content="@alex_frantic">
    <meta name="twitter:title" content="Moving My Serverless Project to Ruby on Rails">
    <meta name="twitter:description" content="Serverless is like a black hole. It promised exciting adventures, but the gravity sucked me in and I spend most of my efforts dealing with its complexity, in...">
    <meta name="twitter:image" content="https://frantic.im/assets/back-to-rails/og-image.jpg">

    <link id="favicon" rel="icon" type="image/png" href="/favicon.png">
    <script>
      if ('ethereum' in window) {
        document.getElementById('favicon').href = '/assets/favicon-hex.png';
      }
    </script>

    <style type="text/css" media="screen">
      /* Typography-first theme for frantic.im (Arial-centric) */
:root {
  /* Color scheme â€“ light */
  --background: hsl(40, 33%, 99%);
  --text: hsl(220, 20%, 18%);
  --text-secondary: hsl(220, 10%, 42%);
  --accent: hsl(220, 72%, 46%);
  --accent-underline: color-mix(in srgb, var(--accent) 60%, transparent);
  --separator: hsla(220, 20%, 90%, 0.5);

  /* Typography */
  --body-font: Arial, Helvetica, "Helvetica Neue", system-ui, -apple-system, "Segoe UI", sans-serif;
  --heading-font: var(--body-font);
  --mono-font: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;

  /* Fluid type scale */
  --step--2: clamp(0.75rem, 0.68rem + 0.2vw, 0.85rem);
  --step--1: clamp(0.9rem, 0.83rem + 0.25vw, 1rem);
  --step-0: clamp(1rem, 0.95rem + 0.35vw, 1.125rem);
  --step-1: clamp(1.20rem, 1.1rem + 0.9vw, 1.6rem);
  --step-2: clamp(1.40rem, 1.35rem + 1.2vw, 2rem);
  --step-3: clamp(1.80rem, 1.7rem + 1.8vw, 2.6rem);
  --step-4: clamp(2.40rem, 2.1rem + 2.5vw, 3.2rem);

  /* Rhythm */
  --line-height: 1.7;
  --heading-line-height: 1.25;
  --max-measure: 72ch;
  --narrow-measure: 64ch;

  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.5rem;
  --space-6: 2rem;
  --space-7: 3rem;
  --radius-1: 6px;
  --radius-2: 10px;

  /* Link underline */
  --underline-offset: 0.15em;
  --underline-thickness: 0.08em;

  /* Quotes */
  --open-quote: "\201C";
  --close-quote: "\201D";
  --open-quote-single: "\2018";
  --close-quote-single: "\2019";
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: hsl(223, 16%, 12%);
    --text: hsl(220, 20%, 92%);
    --text-secondary: hsl(220, 10%, 70%);
    --accent: hsl(220, 80%, 70%);
    --accent-underline: color-mix(in srgb, var(--accent) 40%, transparent);
    --separator: hsl(220, 12%, 22%);
  }
}

/* Base */
html {
  font-size: clamp(16px, 0.9rem + 0.2vw, 17px);
  box-sizing: border-box;
  hanging-punctuation: first allow-end;
  quotes: var(--open-quote) var(--close-quote) var(--open-quote-single) var(--close-quote-single);
  text-size-adjust: 100%;
}

*, *:before, *:after { box-sizing: inherit; }

body {
  background-color: var(--background);
  color: var(--text);
  font-family: var(--body-font);
  font-size: var(--step-0);
  line-height: var(--line-height);
  letter-spacing: 0.005em;
  word-spacing: 0.03em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-kerning: normal;
  font-variant-ligatures: common-ligatures contextual;
  font-variant-numeric: proportional-nums;
  font-variant-caps: normal;
  font-optical-sizing: auto;
  font-variation-settings: normal;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

/* Container */
.container {
  max-width: var(--max-measure);
  min-height: 100vh;
  margin: 0 auto;
  padding: var(--space-6) var(--space-5);
}

.container img {
  display: block;
  max-width: calc(100% + 3rem);
  height: auto;
  margin: 0 -1.5rem;
}

@media (max-width: 600px) {
  .container { padding: var(--space-5) var(--space-4); }
  .container img { max-width: calc(100% + 2rem); margin: 0 -1rem; }
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--heading-font);
  text-wrap: balance;
  font-weight: 700;
  line-height: var(--heading-line-height);
  margin: var(--space-7) 0 var(--space-5);
}

h1 { font-size: var(--step-2); letter-spacing: -0.0175em; margin-top: var(--space-6); }
h2 { font-size: var(--step-1); letter-spacing: -0.01em; }
h3 { font-size: var(--step-0); }
h4 { font-size: var(--step-0); }
h5 { font-size: var(--step-0); }
h6 { font-size: var(--step--1); font-variant-caps: small-caps; letter-spacing: 0.04em; }

p, ul, ol, dl, figure, blockquote, pre, table { margin: 0 0 var(--space-5); }

p {
  max-width: var(--max-measure);
}

.lead { font-size: var(--step-1); color: var(--text); }

small, .small { font-size: var(--step--1); color: var(--text-secondary); }

/* Header */
.site-header {
  border-bottom: 1px solid var(--separator);
  margin-bottom: var(--space-7);
  padding-bottom: var(--space-4);
  display: flex;
  gap: 0 var(--space-4);
  justify-content: space-between;
  align-items: baseline;
  flex-wrap: wrap;
}

.site-title {
  font-size: var(--step--1);
  font-weight: 700;
  margin: 0;
}

/* Navigation */
.nav {  }

.nav-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  gap: var(--space-4);
}

.nav-link {
  color: var(--text-secondary);
  text-decoration: none;
  font-size: var(--step--2);
  transition: color 0.2s ease;
  text-underline-offset: var(--underline-offset);
}

.nav-link:hover { color: var(--accent); }

/* Article */
.article { margin-bottom: calc(var(--space-7) + var(--space-4)); }

.article-title { margin-bottom: var(--space-2); color: var(--text); }

.article-title a, .site-header a { color: var(--text); text-decoration: none; }
.article-title a:hover, .site-header a:hover { text-decoration: none; }

.article-meta {
  color: var(--text-secondary);
  font-size: var(--step--1);
  margin-bottom: var(--space-5);
}

.article-content { font-size: 1rem; }

/* Inline text elements */
strong, b { font-weight: 700; }
em, i { font-style: italic; }
mark {
  background: color-mix(in srgb, var(--accent) 18%, transparent);
  color: inherit;
  padding: 0 0.15em;
  border-radius: 2px;
}

abbr[title] { text-decoration: underline dotted; text-underline-offset: 0.15em; }

sup, sub { line-height: 0; position: relative; }
sup { top: -0.3em; }
sub { bottom: -0.2em; }

/* Links */
a {
  color: var(--accent);
  text-decoration-line: underline;
  text-decoration-style: solid;
  text-decoration-color: var(--accent-underline);
  text-decoration-thickness: var(--underline-thickness);
  text-underline-offset: var(--underline-offset);
  text-decoration-skip-ink: auto;
  transition: color 120ms ease, text-decoration-color 120ms ease;
}

a:hover { text-decoration-color: currentColor; }

a:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 35%, transparent);
  border-radius: 4px;
}

/* Blockquote */
blockquote {
  border-left: 4px solid var(--separator);
  padding-left: var(--space-5);
  margin: var(--space-5) -1rem;
  color: var(--text-secondary);
  font-size: var(--step-0);
}

blockquote p { max-width: var(--narrow-measure); }

blockquote p:first-child::before { content: open-quote; margin-right: 0.1em; color: var(--text-secondary); }
blockquote p:last-child::after { content: close-quote; margin-left: 0.05em; color: var(--text-secondary); }

/* Code */
code, kbd, samp {
  font-family: var(--mono-font);
  font-size: 0.95em;
  -webkit-font-smoothing: auto;
  -moz-osx-font-smoothing: auto;
}

pre {
  font-size: var(--step--1);
  background: color-mix(in srgb, var(--text) 6%, transparent);
  padding: 16px 30px 14px;
  margin: 1em -30px;
  white-space: pre;
  word-wrap: break-word;
  font-style: normal;
  overflow-x: auto;
  tab-size: 4;
  border-radius: var(--radius-1);
  border: 1px solid var(--separator);
}

pre code { font-size: inherit; }

/* Lists */
ul, ol { padding-left: 1.3em; }

li { margin-block: 0.4em; }

li::marker { color: color-mix(in srgb, var(--text) 60%, transparent); }

/* Tables */
table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  font-variant-numeric: tabular-nums; /* aligns numbers */
}

th, td {
  padding: 0.5rem 0.75rem;
  border-bottom: 1px solid var(--separator);
  text-align: start;
}

th { color: var(--text); font-weight: 700; }

td { color: var(--text); }

/* Images, figures */
figure { margin: 0 0 var(--space-5); }

figcaption {
  font-size: var(--step--1);
  color: var(--text-secondary);
  margin-top: var(--space-2);
  text-align: start;
}

/* Subscribe section */
.subscribe-section {
  margin: 0 calc(50% - 50vw);
  padding: 4rem calc(50vw - 50%);
}

.subscribe-content { margin: 0 auto; }

.subscribe-title { font-size: var(--step-1); margin: 0 0 1rem; letter-spacing: -0.01em; }

.subscribe-text { font-size: var(--step--1) }

.subscribe-form { display: flex; gap: 1rem; margin-bottom: 1rem; }

.subscribe-input {
  flex: 1;
  padding: 0.8rem 1rem;
  font-size: var(--step--1);
  font-family: var(--body-font);
  border: 1px solid var(--separator);
  border-radius: 6px;
  background: var(--background);
  color: var(--text);
}

.subscribe-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 25%, transparent); }

.subscribe-button {
  padding: 0.8rem 1.25rem;
  font-size: var(--step--1);
  font-family: var(--body-font);
  font-weight: 600;
  color: var(--background);
  background: var(--text);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: filter 0.2s ease;
}

.subscribe-button:hover { filter: brightness(1.05); }

.subscribe-footnote { font-size: var(--step--2); color: var(--text-secondary); margin: 0; }

@media (max-width: 600px) {
  .subscribe-form { flex-direction: column; }
  .subscribe-button { width: 100%; }
}

/* Footer */
.site-footer {
  margin: 0 calc(50% - 50vw);
  padding: 4rem calc(50vw - 50%);
}

.site-footer a { color: var(--text-secondary); text-decoration: none; }

.footer-inner { max-width: var(--max-measure); margin: 0 auto; }

.footer-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-7);
  margin-bottom: var(--space-7);
}

.footer-title { font-family: var(--heading-font); font-size: var(--step--1); margin: 0 0 1rem; font-weight: 600; }

.footer-bio { font-size: var(--step--1); line-height: 1.6; color: var(--text-secondary); margin: 0; }

.footer-heading { font-family: var(--heading-font); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.06em; margin: 0 0 1rem; color: var(--text-secondary); }

.social-links { display: flex; flex-direction: row; gap: 0.75rem; }

.social-link {
  display: flex; justify-content: space-between; align-items: baseline;
  text-decoration: none; color: var(--text); padding: 0.5rem 0;
  border-bottom: 1px solid var(--separator);
}

.social-link:hover { color: var(--accent); text-decoration: none; }

.social-name { font-weight: 600; }

.social-handle { font-size: var(--step--1); color: var(--text-secondary); }

.social-link:hover .social-handle { color: var(--accent); }

.footer-bottom { padding-top: var(--space-6); border-top: 1px solid var(--separator); display: flex; justify-content: space-between; align-items: baseline; gap: var(--space-6); }

.footer-copyright, .footer-colophon { font-size: 0.85rem; color: var(--text-secondary); margin: 0; }

@media (max-width: 600px) {
  .footer-content { grid-template-columns: 1fr; gap: 2rem; margin-bottom: 2rem; }
  .footer-bottom { flex-direction: column; gap: 0.5rem; }
  .footer-inner { padding: 0 1rem; }
}

/* Related posts */
.related-posts { margin: var(--space-7) 0; }

.related-posts a { color: var(--text); text-decoration: none; }
.related-posts a:hover { color: var(--accent); }

.related-posts h3 { color: var(--text-secondary); font-size: var(--step--1); margin-bottom: var(--space-4); }

.related-posts ul { list-style: none; padding: 0; margin: 0; }

.related-posts li {
  font-size: var(--step-0);
  letter-spacing: -0.015em;
  font-family: var(--heading-font);
  line-height: var(--heading-line-height);
  font-weight: 700;
  margin: 1rem 0;
}

/* Year list */
.year-posts { list-style: none; padding-left: 1.5rem; margin: 0.5rem 0 1.5rem; }
.year-posts li { margin-bottom: 0.5rem; }
.year-posts a { color: var(--text-secondary); font-size: var(--step--1); text-decoration: none; }
.year-posts a:hover { color: var(--accent); text-decoration: none; }

/* Footer lists (legacy) */
.footer-section { margin-bottom: var(--space-7); }
.footer-heading { font-size: 1.2rem; margin: 0 0 1.5rem; }
.footer-list { list-style: none; padding: 0; margin: 0; }
.footer-list li { margin-bottom: 1.2rem; }
.footer-link { display: flex; justify-content: space-between; align-items: baseline; color: var(--text); text-decoration: none; }
.footer-link:hover { text-decoration: none; }
.footer-link:hover .post-title { color: var(--accent); }
.post-title { transition: color 0.2s ease; }
.post-meta, .post-count { color: var(--text-secondary); font-size: var(--step--1); }

/* Accessibility & motion */
:focus-visible { outline: 2px solid color-mix(in srgb, var(--accent) 70%, transparent); outline-offset: 3px; }

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* Syntax highlighting tweaks (both Rouge and HLJS) */
.highlight .kd, .highlight .k { font-weight: 700; }
.highlight .mi { color: #2b6cb0; }
.highlight .cm { color: #6b7280; }

.hljs-built_in, .hljs-keyword { font-weight: 700; }
.hljs-string, .hljs-number { color: #2b6cb0; }
.hljs-comment { color: #6b7280; }

      .large {
  font-size: 1.5em;
  line-height: 1.3;
  padding: 50px;
  margin: 0px -50px;
  background-color: #eee;
  border-radius: 2px;
}

    </style>
  </head>

  <body>
    <div class="container">
  <header class="site-header">
  <a href="/">
    <h1 class="site-title">frantic.im</h1>
  </a>
  <nav class="nav">
    <ul class="nav-list">
      
      <li><a href="/blog" class="nav-link">Blog</a></li>
      
      <li><a href="/subscribe/" class="nav-link">Subscribe</a></li>
      
      <li><a href="/" class="nav-link">About</a></li>
      
    </ul>
  </nav>
</header>


  <main>
    <article class="article ">
      <h1 class="article-title">
        <a href="/back-to-rails"> Moving My Serverless Project to Ruby on Rails </a>
      </h1>
      
      <div class="article-meta">
        Nov 14, 2020 by Alex Kotliarskyi
      </div>
      
      <div class="article-content"><p>I have a small side project: <a href="https://hacker.gifts">digital gift cards for hackers</a>. It uses Shopify for all the store-related stuff: frontend, payments, refunds, reports, etc.</p>
<p>But unlike regular digital products (ebooks, videos) I wanted each card that the user purchases from the store to be unique. So I made a script that generates personalized images and ran it manually for every order.</p>
<p>The next logical step was automating this process. I started with serverless AWS Lambda. At the time it was the hot new tech and I wanted to learn more. It seemed very fitting for my use-case: single-responsibility functions that can run at any time and donâ€™t require server maintenance.</p>
<p><img src="/assets/back-to-rails/simple-lambda.png" alt="" /></p>
<p>It was super easy to get started. I built a JavaScript function and deployed it to AWS Lambda, added Shopify web hook and it all worked!</p>
<p>Early benefits of serverless (for hobby projects):</p>
<ul>
<li>Easy to get started</li>
<li>Donâ€™t have to configure or maintain servers</li>
<li>Free for small loads</li>
</ul>
<p>In reality, writing the simple Lambda functions turned out to be only 10% of the work.</p>
<p>Time passed and my backend started getting more complex: I needed to store some state for each <a href="https://hacker.gifts/products/space-invaders">puzzle</a>, send confirmation emails, show an order details page. What started as a simple function, grew into a bunch of serverless functions, SNS topics, S3 buckets, DynamoDB tables. All bound together with plenty of YAML glue, schema-less JSON objects passed around and random hardcoded configs in AWS console.</p>
<p>I think itâ€™s just a typical software development lifecycle: things grow organically, become a mess, and require some refactoring. Make it run first (discover market fit), then make it right (refactor to integrate the new discoveries).</p>
<p>But this time it was different. I couldnâ€™t refactor things as easily as I used to in traditional monolithic apps. Hereâ€™s why:</p>
<p class="large">When the building blocks are too simple, the complexity moves into the interaction between the blocks.</p>
<p>And the interactions between the serverless blocks happen <em>outside</em> my application. A lambda publishes a message to SNS, another one picks it up and writes something to DynamoDB, the third one takes that new record and sends an emailâ€¦</p>
<p>I could test every single block in that flow, but I didnâ€™t have confidence in the overall process. What if publishing fails, how would I know that? How would system recover? Can I rollback and try again? Where do the logs go?</p>
<p>Another swarm of problems was hiding in my configuration: bad Route 53 record, typos in SNS topics, wrong S3 bucket region. Tracing errors was a challenge, thereâ€™s no single log output I can look into.</p>
<p class="large">With serverless, I was no longer dealing with my project's domain, I was dealing with the distributed system's domain.</p>
<p>At this point I felt fooled.</p>
<p>I came for the easy way to deploy code and not think about servers, but in the end had to design my system around the platformâ€™s limitations.</p>
<p>Drawbacks of serverless (for hobby projects):</p>
<ul>
<li>Hard to follow information flow</li>
<li>Impossible to replicate production environment locally</li>
<li>Slow iteration speed</li>
<li>Lack of end-to-end testing</li>
<li>Immature documentation (dominated by often outdated Medium posts)</li>
<li>No conventions (have to make hundreds of unessential decisions)</li>
</ul>
<p>â€”</p>
<p>I was clearly not enjoying the serverless. So I decided to rewrite it. After all, it is a side project Iâ€™m doing for fun. The tech stack of choice â€” Ruby on Rails.</p>
<p>I havenâ€™t used Rails since 2013, and for the last 8 years at Facebook Iâ€™ve been mostly doing JavaScript.</p>
<p><img src="/assets/back-to-rails/logo.jpg" alt="" /></p>
<p>The experience of picking Rails back up was really nice butâ€¦ uneventful. Not much had really changed. A few things got added, a few small things moved around.</p>
<p>Of course I did <a href="https://github.com/rails/rails/issues/38060">hit some magical Ruby issues</a>. But unlike my typical experience with JavaScript, I was quickly able to find the solution.</p>
<p>Rails comes with so many things built-in and configured. Over the years, without Rails, I used to gluing random JavaScript libraries together to roll my own routing, file storage wrappers, email preview pipeline, managing secrets, test setup with fixtures, database migrations, logging, performance reporting, deployment scripts. With Rails I didnâ€™t have to think about all these details and could simply focus on making product-visible changes.</p>
<p>It was like driving a Tesla after years of making my own scrappy cars. Similar components, but all configured and aligned to work well together.</p>
<p>Benefits of Rails (for hobby projects):</p>
<ul>
<li>Conventions</li>
<li>Tooling, libraries</li>
<li>Documentation</li>
<li>Monolith is easy to understand and test</li>
</ul>
<p>Drawbacks of Rails (for hobby projects):</p>
<ul>
<li>Feels heavyweight in the beginning</li>
<li>Hurts if your opinions differ from Rails conventions</li>
<li>Have to host on a server</li>
<li>Doesnâ€™t sound cool in 2020 (anymore and maybe yet)</li>
</ul>
<p>â€”</p>
<p>Serverless is like a black hole. It promised exciting adventures, but gravity sucked me in and I spent most of my efforts dealing with its complexity, instead of focusing on my product.</p>
</div>
    </article>

    







    <div class="related-posts">
      <h3>Random Posts</h3>
      <ul>
        
        
        <li>
          <a href="/get-your-shit-together-day" class="footer-link">
            The Get Your Shit Together Day
          </a>
        </li>
        
        <li>
          <a href="/octave" class="footer-link">
            A Side Project Story: Octave Cloud
          </a>
        </li>
        
        <li>
          <a href="/notify-on-completion" class="footer-link">
            Show OSX Notification When Long-Running Command Finishes and Your Terminal Is Not in Focus
          </a>
        </li>
        
        <li>
          <a href="/using-redux-with-flow" class="footer-link">
            Using Redux with Flow
          </a>
        </li>
        
      </ul>
    </div>

  
  </main>

  <section class="subscribe-section">
  <div class="subscribe-content">
    <h2 class="subscribe-title">Get New Posts via Email</h2>
    <p class="subscribe-text">
      A cron job sends an email every time I publish a new blog post. Usually
      once every 2 months.
    </p>
    <form
      class="subscribe-form"
      action="https://buttondown.email/api/emails/embed-subscribe/frantic"
      method="post"
      target="popupwindow"
      onsubmit="window.open('https://buttondown.email/frantic', 'popupwindow')"
    >
      <input
        type="email"
        name="email"
        id="bd-email"
        placeholder="your@email.com"
        class="subscribe-input"
        aria-label="Email address"
      />
      <button type="submit" class="subscribe-button">Subscribe</button>
    </form>
    <p class="subscribe-footnote">
      No spam. One click to unsubscribe. Powered by
      <a href="https://buttondown.email/refer/frantic" target="_blank">
        Buttondown
      </a>
    </p>
  </div>
</section>
 <footer class="site-footer">
  <div class="footer-bottom">
    <p class="footer-copyright">
      Â© 2025 Alex Kotliarskyi. All rights reserved.
    </p>
    <p class="footer-colophon social-links">
      <a target="_blank" href="https://x.com/alex_frantic">Twitter</a>
      <a target="_blank" href="https://bsky.app/profile/frantic.im">Bluesky</a>
      <a target="_blank" href="https://github.com/frantic">GitHub</a>
    </p>
  </div>
</footer>

</div>

    
    <script defer src="https://u.frantic.im/script.js" data-website-id="cd2ea49a-5998-477e-8f35-a6ab8d2df514"></script>
    
  </body>
</html>
